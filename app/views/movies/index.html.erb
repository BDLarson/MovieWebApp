<div class="continer-fluid">
  <div class="row">
    <div class="col-md-12">
      <p id="notice"><%= notice %></p>

      <h1>Movies</h1>

      <table class="table">
        <thead>
          <tr>
            <th>Title</th>
            <th>Released</th>
            <th>Genre</th>
            <th colspan="3"></th>
          </tr>
        </thead>

        <tbody>
          <% @movies.each do |movie| %>
            <tr>
              <td><%= movie["title"] %></td>
              <td><%= movie["released"] %></td>
              <!-- using #{} which is essentially toString() -->
              <td><%= Genre.connection
                .select_one("SELECT *
                FROM genres
                WHERE id = #{movie['genre_id']}"
                )["name"] %></td>
              <td>
                <%= link_to 'Show', movie, class: "btn btn-info btn-sm"%>
              </td>
              <td>
                <%= link_to 'Edit', edit_movie_path(movie), class: "btn btn-warning btn-sm" %>
              </td>
              <td>
                <%= link_to 'Destroy', movie,
                    method: :delete,
                    data: { confirm: 'Are you sure?' },
                    class: "btn btn-danger btn-sm"%></td>
            </tr>
          <% end %>
        </tbody>
      </table>

      <br>

      <%= link_to 'New Movie', new_movie_path, class: "btn btn-success" %>
    </div>
  </div>
</div>
